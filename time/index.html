
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../developer-examples/">
      
      
        <link rel="next" href="../meteo/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.26">
    
    
      
        <title>Créer un plugin - A.V.A.T.A.R</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.6543a935.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      
  
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M64 32C28.7 32 0 60.7 0 96v320c0 35.3 28.7 64 64 64h224V368c0-26.5 21.5-48 48-48h112V96c0-35.3-28.7-64-64-64H64zm384 320H336c-8.8 0-16 7.2-16 16v112l32-32 64-64 32-32z"/></svg>');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-40-176h24v-64h-24c-13.3 0-24-10.7-24-24s10.7-24 24-24h48c13.3 0 24 10.7 24 24v88h8c13.3 0 24 10.7 24 24s-10.7 24-24 24h-80c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/></svg>');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M480 32c0-12.9-7.8-24.6-19.8-29.6S434.5.2 425.3 9.3L381.7 53c-48 48-113.1 75-181 75H64c-35.3 0-64 28.7-64 64v96c0 35.3 28.7 64 64 64v128c0 17.7 14.3 32 32 32h64c17.7 0 32-14.3 32-32V352h8.7c67.9 0 133 27 181 75l43.6 43.6c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6V300.4c18.6-8.8 32-32.5 32-60.4s-13.4-51.6-32-60.4V32zm-64 76.7v262.6C357.2 317.8 280.5 288 200.7 288H192v-96h8.7c79.8 0 156.5-29.8 215.3-83.3z"/></svg>');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7l233.4-233.3c12.5-12.5 32.8-12.5 45.3 0z"/></svg>');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 512a256 256 0 1 0 0-512 256 256 0 1 0 0 512zm-86.2-346.7c7.9-22.3 29.1-37.3 52.8-37.3h58.3c34.9 0 63.1 28.3 63.1 63.1 0 22.6-12.1 43.5-31.7 54.8L280 264.4c-.2 13-10.9 23.6-24 23.6-13.3 0-24-10.7-24-24v-13.5c0-8.6 4.6-16.5 12.1-20.8l44.3-25.4c4.7-2.7 7.6-7.7 7.6-13.1 0-8.4-6.8-15.1-15.1-15.1h-58.3c-3.4 0-6.4 2.1-7.5 5.3l-.4 1.2c-4.4 12.5-18.2 19-30.6 14.6s-19-18.2-14.6-30.6l.4-1.2zM224 352a32 32 0 1 1 64 0 32 32 0 1 1-64 0z"/></svg>');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7.2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8.2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24v112c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0-64 0 32 32 0 1 0 64 0z"/></svg>');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.1 52.4 442.6 6.5c-1.9-3.9-6.1-6.5-10.5-6.5s-8.5 2.6-10.4 6.5l-16.5 45.9-46 16.8c-4.3 1.6-7.3 5.9-7.2 10.4 0 4.5 3 8.7 7.2 10.2l45.7 16.8 16.8 45.8c1.5 4.4 5.8 7.5 10.4 7.5s8.9-3.1 10.4-7.5l16.5-45.8 45.7-16.8c4.2-1.5 7.2-5.7 7.2-10.2 0-4.6-3-8.9-7.2-10.4l-45.6-16.8zm-132.4 53c-12.5-12.5-32.8-12.5-45.3 0l-2.9 2.9c-22-8-45.8-12.3-70.5-12.3C93.1 96 0 189.1 0 304s93.1 208 208 208 208-93.1 208-208c0-24.7-4.3-48.5-12.2-70.5l2.9-2.9c12.5-12.5 12.5-32.8 0-45.3l-80-80zM200 192c-57.4 0-104 46.6-104 104v8c0 8.8-7.2 16-16 16s-16-7.2-16-16v-8c0-75.1 60.9-136 136-136h8c8.8 0 16 7.2 16 16s-7.2 16-16 16h-8z"/></svg>');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 398.9c58.5-41.1 96-104.1 96-174.9C512 100.3 397.4 0 256 0S0 100.3 0 224c0 70.7 37.5 133.8 96 174.9V464c0 26.5 21.5 48 48 48h48v-48c0-8.8 7.2-16 16-16s16 7.2 16 16v48h64v-48c0-8.8 7.2-16 16-16s16 7.2 16 16v48h48c26.5 0 48-21.5 48-48v-65.1zM96 256a64 64 0 1 1 128 0 64 64 0 1 1-128 0zm256-64a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M320 0c17.7 0 32 14.3 32 32v64h120c39.8 0 72 32.2 72 72v272c0 39.8-32.2 72-72 72H168c-39.8 0-72-32.2-72-72V168c0-39.8 32.2-72 72-72h120V32c0-17.7 14.3-32 32-32zM208 384c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zm96 0c-8.8 0-16 7.2-16 16s7.2 16 16 16h32c8.8 0 16-7.2 16-16s-7.2-16-16-16h-32zM264 256a40 40 0 1 0-80 0 40 40 0 1 0 80 0zm152 40a40 40 0 1 0 0-80 40 40 0 1 0 0 80zM48 224h16v192H48c-26.5 0-48-21.5-48-48v-96c0-26.5 21.5-48 48-48zm544 0c26.5 0 48 21.5 48 48v96c0 26.5-21.5 48-48 48h-16V224h16z"/></svg>');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M288 0H128c-17.7 0-32 14.3-32 32s14.3 32 32 32v132.8c0 11.8-3.3 23.5-9.5 33.5L10.3 406.2C3.6 417.2 0 429.7 0 442.6 0 480.9 31.1 512 69.4 512h309.2c38.3 0 69.4-31.1 69.4-69.4 0-12.8-3.6-25.4-10.3-36.4L329.5 230.4c-6.2-10.1-9.5-21.7-9.5-33.5V64c17.7 0 32-14.3 32-32S337.7 0 320 0h-32zm-96 196.8V64h64v132.8c0 23.7 6.6 46.9 19 67.1l34.5 56.1h-171l34.5-56.1c12.4-20.2 19-43.4 19-67.1z"/></svg>');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 216C0 149.7 53.7 96 120 96h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V216zm256 0c0-66.3 53.7-120 120-120h8c17.7 0 32 14.3 32 32s-14.3 32-32 32h-8c-30.9 0-56 25.1-56 56v8h64c35.3 0 64 28.7 64 64v64c0 35.3-28.7 64-64 64h-64c-35.3 0-64-28.7-64-64V216z"/></svg>');}</style>


  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8m0-18A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2m1 5h-2v4H7v2h4v4h2v-4h4v-2h-4V7Z"/></svg>');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="dark" data-md-color-primary="blue-grey" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#world-time-plugin" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="A.V.A.T.A.R" class="md-header__button md-logo" aria-label="A.V.A.T.A.R" data-md-component="logo">
      
  <img src="../img/Avatar.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            A.V.A.T.A.R
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Créer un plugin
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="dark" data-md-color-primary="blue-grey" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4m0-7c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue-grey" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../introduction/" class="md-tabs__link">
          
  
  Installation

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../getting-started/" class="md-tabs__link">
          
  
  Getting started

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../developer-guide/" class="md-tabs__link">
          
  
  Developer Guide

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../about/" class="md-tabs__link">
        
  
    
  
  About

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="A.V.A.T.A.R" class="md-nav__button md-logo" aria-label="A.V.A.T.A.R" data-md-component="logo">
      
  <img src="../img/Avatar.png" alt="logo">

    </a>
    A.V.A.T.A.R
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installation
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../server-install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installing a client
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Installing a client
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../client-install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client installation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../certificate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTPS certificate
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Settings
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Settings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../server-properties/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server settings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../client-properties/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client settings
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../voice-rules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Voice rules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugin-rules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugin rules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../virtual-client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Virtual client
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugin-studio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugin Studio
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Developer Guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Developer Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorial
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorial
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-prerequisites/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Prerequisites
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-create-plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create a plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-plugin-folders-files/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Folders and files
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-nlp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Natural Language Processing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-intention/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    The intent
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-action/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    L'action
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-script/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Le script
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-packager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Packager
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../server-API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../client-API/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Client
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developer-examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Créer un plugin
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Créer un plugin
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creer-le-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Créer le plugin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definir-les-regles-du-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Définir les règles du plugin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modification-du-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Modification du plugin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localiser-le-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Localiser le plugin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#page-dinformation-du-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Page d'information du plugin
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../meteo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Créer un widget bouton (Part 1)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../meteo-widget/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Créer une fenêtre (Part 2)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../meteo-widget-client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Transférer le plugin vers un client (Part 3)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#creer-le-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Créer le plugin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#definir-les-regles-du-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Définir les règles du plugin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#modification-du-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Modification du plugin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#localiser-le-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Localiser le plugin
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#page-dinformation-du-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Page d'information du plugin
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="world-time-plugin">World time plugin</h1>
<h2 id="creer-le-plugin">Créer le plugin</h2>
<ol>
<li><a href="tutorial-best-practices.md#terminal-de-demarrage-et-debogage">Démarrez le serveur dans un terminal</a></li>
<li>
<p><a href="tutorial-plugin-studio.md">Créez un plugin par <em>Plugin Studio</em></a></p>
<ul>
<li>Nom : <code>worldTime</code></li>
<li>Affiché: <code>World time</code></li>
<li>Rules: <ul>
<li>Oui</li>
<li>Par la syntaxe de la phrase</li>
</ul>
</li>
<li>Script methods: sélectionnez <code>Méthodes de localisation du langage</code></li>
<li>Ajouter une image <ul>
<li>Sélectionnez l'image <code>&lt;A.V.A.T.A.R&gt;/resources/app/assets/images/PluginCreation/worldTime.png</code></li>
</ul>
</li>
<li>Pas de documentation</li>
</ul>
<p><img alt="plugin-creation" src="../img/plugin-creation.png" width="450" /></p>
</li>
</ol>
<h2 id="definir-les-regles-du-plugin">Définir les règles du plugin</h2>
<ol>
<li>
<p><a href="../plugin-studio/#gestion-des-proprietes">Modifiez les propriétés du plugin</a></p>
<ul>
<li>Cliquez sur l'onglet <em>Properties</em></li>
<li>Modifiez l'action <code>test</code> par <code>get</code></li>
<li>Modifiez la règle par <code>what time {be}</code><ul>
<li>Voir <a href="../plugin-rules/#correspondances">Root matches</a> dans le tableau des correspondances de règles de plugin pour plus de détails sur l'écriture de la règle</li>
</ul>
</li>
<li>Ouvrez le menu contextuel<ul>
<li>Sauvegardez les propriétés par le menu <code>Save</code></li>
</ul>
</li>
</ul>
<p><img alt="timeProperties" src="../img/timeProperties.png" width="350" /></p>
<ul>
<li>Fermez <em>Plugin Studio</em></li>
<li>Clique sur <em>Later</em> pour ne pas redémarrer A.V.A.T.A.R</li>
</ul>
</li>
<li>
<p>Modifiez le fichier script du plugin dans <a href="../tutorial-prerequisites/#editeur-de-code">Visual Studio</a> (ou un autre éditeur de texte)</p>
<ul>
<li>Ouvrez le fichier <code>&lt;A.V.A.T.A.R&gt;/resources/app/core/plugins/worldTime/worldTime.js</code></li>
<li>Modifiez le tableau de commandes et le nom de la méthode <code>test</code> par <code>get</code></li>
<li>Modifiez la variable <code>client</code> par <code>data.client</code> dans la fonction <code>Avatar.speak</code></li>
<li>Accessoirement, vous pouvez supprimer tous les commentaires et les imports ajoutés pendant la création du plugin</li>
</ul>
<div class="highlight"><span class="filename">time.js</span><pre><span></span><code><span class="c1">//language pak</span>
<span class="kd">let</span><span class="w"> </span><span class="nx">Locale</span><span class="p">;</span>

<span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">init</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="k">await</span><span class="w"> </span><span class="nx">Avatar</span><span class="p">.</span><span class="nx">lang</span><span class="p">.</span><span class="nx">addPluginPak</span><span class="p">(</span><span class="s2">&quot;worldTime&quot;</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;worldTime: unable to load language pak files&#39;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="p">}</span>

<span class="k">export</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="kd">function</span><span class="w"> </span><span class="nx">action</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="w"> </span><span class="nx">callback</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">Locale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="nx">Avatar</span><span class="p">.</span><span class="nx">lang</span><span class="p">.</span><span class="nx">getPak</span><span class="p">(</span><span class="s2">&quot;worldTime&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">language</span><span class="p">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nx">Locale</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">throw</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="ne">Error</span><span class="w"> </span><span class="p">(</span><span class="sb">`worldTime: Unbale to find the &#39;</span><span class="si">${</span><span class="nx">data</span><span class="p">.</span><span class="nx">language</span><span class="si">}</span><span class="sb">&#39; language pak.`</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">tblActions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="w">            </span><span class="nx">get</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">get</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w">                   </span>
</span><span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="nx">info</span><span class="p">(</span><span class="s2">&quot;worldTime:&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">action</span><span class="p">.</span><span class="nx">command</span><span class="p">,</span><span class="w"> </span><span class="nx">L</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">&quot;plugin.from&quot;</span><span class="p">),</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">);</span>

<span class="w">        </span><span class="nx">tblActions</span><span class="p">[</span><span class="nx">data</span><span class="p">.</span><span class="nx">action</span><span class="p">.</span><span class="nx">command</span><span class="p">]()</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">)</span><span class="w"> </span><span class="nx">Avatar</span><span class="p">.</span><span class="nx">Speech</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">);</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span><span class="w"> </span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w">   </span>

<span class="w">    </span><span class="nx">callback</span><span class="p">();</span>

<span class="p">}</span>


<span class="hll"><span class="kd">const</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
</span>
<span class="hll"><span class="w">    </span><span class="nx">Avatar</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="nx">Locale</span><span class="p">.</span><span class="nx">get</span><span class="p">([</span><span class="s2">&quot;message.test&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">]),</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">);</span>
</span>
<span class="p">}</span>
</code></pre></div>
</li>
<li>
<p>Redémarrez A.V.A.T.A.R</p>
<ul>
<li>Faite un <span class="keys"><kbd class="key-control">Ctrl</kbd></span> +<code>C</code> dans le terminal pour arrêter le serveur</li>
<li>Récupérez la dernière commande <code>npm start .</code> pour redémarrer le serveur</li>
</ul>
</li>
<li>
<p>Testez le plugin  </p>
<ul>
<li>Démarrez un client si ce n'est pas déjà fait</li>
<li>Exécutez la règle <code>what time is it</code></li>
</ul>
<details class="warning">
<summary>Attention</summary>
<p>Si le message <img alt="errorPak" src="../img/errorPak.png" width="300" /> apparaît dans la console A.V.A.T.A.R, vérifiez si le pak de langue du client existe bien dans le répertoire <em>time/locales</em>. Si il n'existe pas, copiez le pak de langue existant en <em>XX</em>.pak, ensuite modifiez la valeur de la clé <code>test</code>.</p>
</details>
</li>
</ol>
<h2 id="modification-du-plugin">Modification du plugin</h2>
<p>Nous allons maintenant faire en sorte d'avoir un plugin fonctionnel qui va nous permettre de demander l'heure pour toutes les principales villes du monde.</p>
<ol>
<li>
<p><a href="../tutorial-nlp/#datarelations-object">L'object relations</a></p>
<p>D'abord, nous pouvons vérifier si <a href="../tutorial-nlp/#datarelations-object">l'object relations</a> peut être utile pour le développement du plugin (voir aussi le <a href="../tutorial-nlp/">Traitement naturel du langage</a>).</p>
<ul>
<li>Ajoutez dans la fonction <em>get()</em> un <em>console.log()</em> pour afficher l'objet relation
<div class="highlight"><span class="filename">time.js</span><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nx">Avatar</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="nx">Locale</span><span class="p">.</span><span class="nx">get</span><span class="p">([</span><span class="s2">&quot;message.test&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">]),</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">);</span>

<span class="hll"><span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Relation:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">relations</span><span class="p">);</span>
</span><span class="p">}</span>
</code></pre></div></li>
<li>Redémarrez A.V.A.T.A.R dans le terminal</li>
<li>
<p>Exécutez la règle <code>what time is it in new york</code></p>
<p><img alt="timezone" src="../img/worldtime-relation.png" width="350" /></p>
</li>
<li>
<p>Nous pouvons voir l'objet <em>relations.location</em></p>
</li>
<li>
<p>Testez plusieurs règles avec des villes du monde pour vérifier :</p>
<ol>
<li>Que majoritairement les plus grandes villes du monde sont correctement reconnues</li>
<li>Que si il n'y a pas de ville dans la règle, l'objet <em>relation.location</em> n'existe pas</li>
</ol>
</li>
<li>
<p>Les tests sont concluants dans la majorité des cas, nous allons donc nous servir du traitement du langage pour développer le plugin.</p>
</li>
</ul>
</li>
</ol>
<details class="tip" open="open">
<summary>Tip</summary>
<p>Quelques villes comme Beijing (ou Pékin) ne sont pas reconnues comme timeZone. Ce petit problème, non inhérant au traitement du langage et qui n'est pas vu dans cet exemple peut être traité simplement au cas par cas par le module <code>moment-timezone</code>.</p>
</details>
<ol>
<li>
<p>Ajoutez des paramètres dans les propriétés</p>
<p>La timezone étant sur une ville principale, nous allons ajouter 2 paramètres:</p>
<ul>
<li>Un paramètre <code>zone</code> pour une timezone par défaut lorsqu'il n'y a pas de ville dans la règle</li>
<li>Un paramètre <code>speech</code> pour que le message de la timezone par défaut soit en relation avec la ville où nous habitons (allons au bout des choses !)</li>
</ul>
<p>Modifiez les paramètres du plugin comme ci-dessous:</p>
<p><img alt="defaultzone" src="../img/defaultzone.png" width="450" /></p>
</li>
<li>
<p>Installez les modules necéssaires</p>
<ul>
<li>
<p>Nous avons besoin de 2 modules d'import :</p>
<ul>
<li><code>underscore</code> est un module A.V.A.T.A.R, il n'est donc pas nécessaire de l'installer (voir <a href="tutorial-best-practices.md#modules-npm">best practices</a>)</li>
<li><code>moment-timezone</code>: Ce module est à installer</li>
</ul>
</li>
<li>
<p>Ouvrez un terminal et déplacez-vous dans le répertoire du plugin</p>
<p><div class="highlight"><pre><span></span><code>cd &lt;A.V.A..T.A.R&gt;/resources/app/cores/plugin/worldTime
</code></pre></div>
    * Installez le module <code>moment-timezone</code></p>
<div class="highlight"><pre><span></span><code>npm install moment-timezone
</code></pre></div>
<p><img alt="timezone" src="../img/timezone.png" width="450" /></p>
</li>
</ul>
</li>
<li>
<p>Ajoutez les imports dans le script au début du fichier</p>
<div class="highlight"><span class="filename">worldTime.js</span><pre><span></span><code><span class="k">import</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;underscore&#39;</span><span class="p">;</span>
<span class="k">import</span><span class="w"> </span><span class="nx">moment</span><span class="w"> </span><span class="kr">from</span><span class="w"> </span><span class="s1">&#39;moment-timezone&#39;</span><span class="p">;</span>
</code></pre></div>
</li>
<li>
<p>Modifiez la fonction <em>get</em> pour inclure la recherche de l'heure comme ci-dessous</p>
<p><strong>Note:</strong> Modifiez les <em>Avatar.speak</em> avec une phrase localisée dans votre langue</p>
<div class="highlight"><span class="filename">worldTime.js</span><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Defines the city, NLP relation or default</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">relations</span><span class="o">?</span><span class="p">.</span><span class="nx">location</span><span class="o">?</span><span class="p">.</span><span class="nx">text</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">relations</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">text</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">Config</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">worldTime</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="nx">zone</span><span class="p">;</span>
<span class="w">        </span><span class="c1">// Defines the city for the speech</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">speechCity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">city</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">Config</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">worldTime</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="nx">zone</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">Config</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">worldTime</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="nx">speech</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">city</span><span class="p">;</span>
<span class="w">        </span><span class="c1">// Updates chars in the city to be conform to timeZones</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">city</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/ /gi</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// Retreives timeZones</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">timeZones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Intl</span><span class="p">.</span><span class="nx">supportedValuesOf</span><span class="p">(</span><span class="s1">&#39;timeZone&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// Searchs for the city in the timeZones table </span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">even</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">_</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">timeZones</span><span class="p">,</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">item</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">indexOf</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">location</span><span class="si">}</span><span class="sb">`</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">())</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="p">});</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">even</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// even can be a string or a Array</span>
<span class="w">            </span><span class="nx">even</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">even</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">even</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">even</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<span class="w">            </span><span class="c1">// Defines the location (e.g. &#39;en&#39; or &#39;fr&#39;) for a language-correct sentence.</span>
<span class="w">            </span><span class="nx">moment</span><span class="p">.</span><span class="nx">locale</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">language</span><span class="p">);</span>
<span class="w">            </span><span class="c1">// Builds the sentence</span>
<span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">sentence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">moment</span><span class="p">.</span><span class="nx">tz</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span><span class="w"> </span><span class="nx">even</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="sb">`[In </span><span class="si">${</span><span class="nx">speechCity</span><span class="si">}</span><span class="sb">, it is] H:m:s [the] dddd DD MMMM`</span><span class="p">);</span>
<span class="w">            </span><span class="c1">// Speaks the sentence</span>
<span class="w">            </span><span class="nx">Avatar</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="nx">sentence</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Speaks a default sentence if no timezone</span>
<span class="w">            </span><span class="nx">Avatar</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="sb">`i&#39;m sorry, i couldn&#39;t retrieve the </span><span class="si">${</span><span class="nx">speechCity</span><span class="si">}</span><span class="sb"> time`</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">)</span><span class="w"> </span><span class="nx">Avatar</span><span class="p">.</span><span class="nx">Speech</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">);</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span><span class="w"> </span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Redémarrez A.V.A.T.A.R dans le terminal</li>
<li>Exécutez la règle <code>what time is it in new york</code></li>
</ul>
</li>
</ol>
<details class="success" open="open">
<summary>Success</summary>
<p>Le plugin <code>worldTime</code> vous donne l'heure pour les plus grandes villes du monde !</p>
</details>
<h2 id="localiser-le-plugin">Localiser le plugin</h2>
<p>Nous pouvons maintenant ajouter la localisation des messages. Pour l'exemple, nous allons ajouter l'anglais et le français.</p>
<ol>
<li>
<p>Créez (ou modifiez) 2 pak de langues dans le répertoire locales comme ci-dessous en remplacant la variable <em>city</em> par un $$ (voir la fonction <a href="API.md#lang-pakgetkey"><em>get</em></a>)</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">en.pak</label><label for="__tabbed_1_2">fr.pak</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;[in $$, it is] H:m:s [the] dddd MMMM DD&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;notime&quot;</span><span class="p">:</span><span class="s2">&quot;i&#39;m sorry, i couldn&#39;t retrieve the $$ time&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="s2">&quot;[a $$, il est] H:m:s [le] dddd DD MMMM&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;notime&quot;</span><span class="p">:</span><span class="s2">&quot;je suis désolé, je n&#39;ai pas réussi à récupérer l&#39;heure de $$&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
</li>
<li>
<p>Modifiez le fichier script pour le multi-langage</p>
<div class="highlight"><span class="filename">worldTime.js</span><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">get</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">)</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// Defines the city, NLP relation or default</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">city</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">relations</span><span class="o">?</span><span class="p">.</span><span class="nx">location</span><span class="o">?</span><span class="p">.</span><span class="nx">text</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">relations</span><span class="p">.</span><span class="nx">location</span><span class="p">.</span><span class="nx">text</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">Config</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">worldTime</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="nx">zone</span><span class="p">;</span>
<span class="w">        </span><span class="c1">// Defines the city for the speech</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">speechCity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">city</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="nx">Config</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">worldTime</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="nx">zone</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">Config</span><span class="p">.</span><span class="nx">modules</span><span class="p">.</span><span class="nx">worldTime</span><span class="p">.</span><span class="k">default</span><span class="p">.</span><span class="nx">speech</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">city</span><span class="p">;</span>
<span class="w">        </span><span class="c1">// Updates chars in the city to be conform to timeZones</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">city</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/ /gi</span><span class="p">,</span><span class="s2">&quot;_&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// Retreives timeZones</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">timeZones</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">Intl</span><span class="p">.</span><span class="nx">supportedValuesOf</span><span class="p">(</span><span class="s1">&#39;timeZone&#39;</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// Searchs for the city in the timeZones table </span>
<span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="nx">even</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">_</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">timeZones</span><span class="p">,</span><span class="w"> </span><span class="nx">item</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">item</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">().</span><span class="nx">indexOf</span><span class="p">(</span><span class="sb">`</span><span class="si">${</span><span class="nx">location</span><span class="si">}</span><span class="sb">`</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">())</span><span class="w"> </span><span class="o">!==</span><span class="w"> </span><span class="o">-</span><span class="mf">1</span><span class="p">;</span><span class="w"> </span><span class="p">});</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">even</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// even can be a string or a Array</span>
<span class="w">            </span><span class="nx">even</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">typeof</span><span class="w"> </span><span class="nx">even</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;string&#39;</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="nx">even</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="nx">even</span><span class="p">[</span><span class="mf">0</span><span class="p">];</span>
<span class="w">            </span><span class="c1">// Defines the location (e.g. &#39;en&#39; or &#39;fr&#39;) for a language-correct sentence.</span>
<span class="w">            </span><span class="nx">moment</span><span class="p">.</span><span class="nx">locale</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">language</span><span class="p">);</span>
<span class="w">            </span><span class="c1">// Builds the sentence</span>
<span class="hll"><span class="w">            </span><span class="kd">const</span><span class="w"> </span><span class="nx">sentence</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">moment</span><span class="p">.</span><span class="nx">tz</span><span class="p">(</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span><span class="w"> </span><span class="nx">even</span><span class="p">).</span><span class="nx">format</span><span class="p">(</span><span class="nx">Locale</span><span class="p">.</span><span class="nx">get</span><span class="p">([</span><span class="s2">&quot;message.time&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">speechCity</span><span class="p">]));</span>
</span><span class="w">            </span><span class="c1">// Speaks the sentence</span>
<span class="w">            </span><span class="nx">Avatar</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="nx">sentence</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Speaks a default sentence if no timezone</span>
<span class="hll"><span class="w">            </span><span class="nx">Avatar</span><span class="p">.</span><span class="nx">speak</span><span class="p">(</span><span class="nx">Locale</span><span class="p">.</span><span class="nx">get</span><span class="p">([</span><span class="s2">&quot;error.notime&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">speechCity</span><span class="p">]),</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">);</span>
</span><span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">)</span><span class="w"> </span><span class="nx">Avatar</span><span class="p">.</span><span class="nx">Speech</span><span class="p">.</span><span class="nx">end</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">client</span><span class="p">);</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">)</span><span class="w"> </span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</li>
</ol>
<h2 id="page-dinformation-du-plugin">Page d'information du plugin</h2>
<p>Nous pouvons maintenant ajouter une page d'information au format <a href="https://www.markdownguide.org/basic-syntax/">Markdown</a>.  </p>
<details class="note" open="open">
<summary>Note</summary>
<p>Le format <a href="https://www.markdownguide.org/basic-syntax/">Markdown</a> est un format de création de page HTML avec un format d'écriture très simple et qui ne nécessite aucunes connaissances particulières en HTML. </p>
<p>Cette document est réalisée avec <a href="https://www.markdownguide.org/basic-syntax/">Markdown</a> et est aussi le format d'écriture adopté par <a href="https://github.com/">GitHub</a><br />
Voir aussi le site <a href="https://squidfunk.github.io/mkdocs-material/reference/">mkdocs-material</a> pour plus d'information</p>
</details>
<details class="rappel" open="open">
<summary>Rappel</summary>
<table>
<thead>
<tr>
<th style="text-align: left;">Nom de fichier</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><code>info.md</code></td>
<td style="text-align: left;">Si il n'existe pas de fichier <code>info_&lt;application language&gt;.md</code> alors ce fichier est utilisé</td>
</tr>
<tr>
<td style="text-align: left;"><code>info_&lt;application language&gt;.md</code></td>
<td style="text-align: left;"><em>application language</em>: Code court du <a href="../server-properties/#application-language">langage de l'application</a><br>Si ce fichier existe alors il est utilisé.<br>Exemple: <code>info_en.md</code></td>
</tr>
</tbody>
</table>
</details>
<p>Pour l'exemple, nous allons ajouter l'anglais et le français.</p>
<ol>
<li>
<p>Ouvrez un terminal et déplacez-vous dans le répertoire <em>assets</em> du plugin</p>
<div class="highlight"><pre><span></span><code>cd &lt;A.V.A..T.A.R&gt;/resources/app/cores/plugin/worldTime/assets
</code></pre></div>
</li>
<li>
<p>Créez 2 fichiers d'information au format <a href="https://www.markdownguide.org/basic-syntax/">Markdown</a> pour l'anglais et le français comme ci-dessous</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">info_en.md</label><label for="__tabbed_2_2">info_fr.md</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code># World time

![worldTime](../../core/plugins/worldTime/assets/images/worldTime.png =100x*)

World time lets you find out the time for all world&#39;s major cities.  

## Rules

### Default location
- `what time is it`: Returns the time for the default location

### Major world city
- `what time is it in new york`: Returns the time for New York city
- `in new york, what time is it`: Returns the time for New York city

## Parameters
* `default.zone`: The default city (the _timeZone_) if no city is in the rule
* `default.speech`: The default city to speak if no city is in the rule

## Adding a language
You can localize A.V.A.T.A.R speech by adding a language pack to the _WorldTime/locales_ folder, copying an existing pack and modifying the key values.
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code># World time

![worldTime](../../core/plugins/worldTime/assets/images/worldTime.png =100x*)

World time vous permet de connaître l&#39;heure pour toutes les grandes villes du monde. 

## Règles

### Emplacement par défaut
- `what time is it`: Retourne l&#39;heure de l&#39;emplacement par défaut

### Grande ville du monde
- `what time is it in new york`: Retourne l&#39;heure pour la ville de New York
- `in new york, what time is it`: Retourne l&#39;heure pour la ville de New York

## Paramètres
* `default.zone`: La ville par défaut (la _timeZone_) si aucune ville n&#39;est mentionnée dans la règle
* `default.speech`: La ville à utiliser pour le dialogue d&#39;A.V.A.T.A.R si aucune ville n&#39;est mentionnée dans la règle.

## Ajouter un langage
Vous pouvez localiser le dialogue d&#39;A.V.A.T.A.R en ajoutant un pack de langues dans le dossier _WorldTime/locales_, en copiant un pack existant et en modifiant les valeurs de clés.
</code></pre></div>
</div>
</div>
</div>
</li>
<li>
<p>Redémarrez A.V.A.T.A.R dans le terminal</p>
</li>
<li>
<p>Afficher la page d'information du plugin dans <em>Plugin studio</em></p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Anglais</label><label for="__tabbed_3_2">Français</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><img alt="info_en" src="../img/info_en.png" width="550" /></p>
</div>
<div class="tabbed-block">
<p><img alt="info_fr" src="../img/info_fr.png" width="550" /></p>
</div>
</div>
</div>
</li>
<li>
<p>Vous pouvez changer le langage de l'application pour vérifier le résultat dans un autre langage</p>
</li>
</ol>
<p><br><br>
<a class="md-button" href="examples-developer.md" style="float:left;"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M6 18V6h2v12H6m3.5-6L18 6v12l-8.5-6Z"/></svg></span> Introduction</a><a class="md-button" href="../meteo/" style="float:right;">Meteo <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16 18h2V6h-2M6 18l8.5-6L6 6v12Z"/></svg></span></a> <br />
<br><br></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 <a href="https://github.com" target="_blank" rel="noopener">A.V.A.T.A.R</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.top", "search.suggest", "search.highlight", "content.code.annotation", "content.code.copy", "content.tooltips"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
    
  </body>
</html>